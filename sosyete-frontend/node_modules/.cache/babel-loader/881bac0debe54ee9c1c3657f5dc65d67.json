{"ast":null,"code":"import { append, addClass, remove, isNullOrUndefined, setStyleAttribute, createElement } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport * as cls from '../base/css-constant';\nimport * as util from '../base/util';\n/**\n * Virtual Scroll\n */\n\nvar VirtualScroll =\n/** @class */\nfunction () {\n  function VirtualScroll(parent) {\n    this.translateY = 0;\n    this.itemSize = 60;\n    this.bufferCount = 3;\n    this.renderedLength = 0;\n    this.averageRowHeight = 0;\n    this.isScrollHeightNull = true;\n    this.parent = parent;\n    this.addEventListener();\n  }\n\n  VirtualScroll.prototype.addEventListener = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n\n    this.parent.on(events.virtualScroll, this.virtualScrolling, this);\n  };\n\n  VirtualScroll.prototype.removeEventListener = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n\n    this.parent.off(events.virtualScroll, this.virtualScrolling);\n  };\n\n  VirtualScroll.prototype.getRenderedCount = function () {\n    this.setItemSize();\n    return Math.ceil(this.parent.element.clientHeight / this.itemSize) + this.bufferCount;\n  };\n\n  VirtualScroll.prototype.setTranslateValue = function () {\n    var resWrap = this.parent.element.querySelector('.' + cls.RESOURCE_COLUMN_WRAP_CLASS);\n    var conWrap = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n    var eventWrap = this.parent.element.querySelector('.' + cls.EVENT_TABLE_CLASS);\n    var timeIndicator = this.parent.element.querySelector('.' + cls.CURRENT_TIMELINE_CLASS);\n    this.renderVirtualTrackHeight(conWrap, resWrap);\n    this.setTranslate(resWrap, conWrap, eventWrap, timeIndicator);\n  };\n\n  VirtualScroll.prototype.renderVirtualTrackHeight = function (contentWrap, resourceWrap) {\n    this.parent.resourceBase.setExpandedResources();\n\n    if (this.isScrollHeightNull) {\n      var wrap = createElement('div', {\n        className: cls.VIRTUAL_TRACK_CLASS\n      });\n      var resWrap = [].slice.call(resourceWrap.querySelectorAll('table td'));\n      var startIndex_1 = parseInt(resWrap[0].getAttribute('data-group-index'), 10);\n      var endIndex_1 = parseInt(resWrap[resWrap.length - 1].getAttribute('data-group-index'), 10);\n      this.parent.resourceBase.renderedResources = this.parent.resourceBase.expandedResources.filter(function (resource) {\n        return resource.groupIndex >= startIndex_1 && resource.groupIndex <= endIndex_1;\n      });\n      this.setItemSize();\n      wrap.style.height = this.parent.resourceBase.expandedResources.length * this.itemSize + 'px';\n      this.isScrollHeightNull = false;\n      var virtual = this.parent.element.querySelector('.' + cls.VIRTUAL_TRACK_CLASS);\n\n      if (!isNullOrUndefined(virtual)) {\n        remove(virtual);\n      }\n\n      contentWrap.appendChild(wrap);\n    }\n  };\n\n  VirtualScroll.prototype.renderVirtualTrack = function (contentWrap) {\n    var wrap = createElement('div', {\n      className: cls.VIRTUAL_TRACK_CLASS\n    });\n    wrap.style.height = this.parent.resourceBase.expandedResources.length * this.itemSize + 'px';\n    contentWrap.appendChild(wrap);\n  };\n\n  VirtualScroll.prototype.updateVirtualScrollHeight = function () {\n    var virtual = this.parent.element.querySelector('.' + cls.VIRTUAL_TRACK_CLASS);\n    var lastResourceIndex = this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1].groupIndex;\n    var lastRenderIndex = this.parent.resourceBase.renderedResources[this.parent.resourceBase.renderedResources.length - 1].groupIndex;\n\n    if (lastRenderIndex !== lastResourceIndex) {\n      var conTable = this.parent.element.querySelector('.' + cls.CONTENT_TABLE_CLASS);\n      this.renderedLength = conTable.querySelector('tbody').children.length;\n      virtual.style.height = conTable.offsetHeight + (this.parent.resourceBase.expandedResources.length - this.renderedLength) * conTable.offsetHeight / this.renderedLength + 'px';\n    } else {\n      virtual.style.height = '';\n    }\n\n    this.averageRowHeight = virtual.offsetHeight / this.parent.resourceBase.expandedResources.length;\n  };\n\n  VirtualScroll.prototype.updateVirtualTrackHeight = function (wrap) {\n    var resourceCount = this.parent.resourceBase.renderedResources.length;\n\n    if (resourceCount !== this.getRenderedCount()) {\n      wrap.style.height = this.parent.element.querySelector('.e-content-wrap').clientHeight + 'px';\n      var resWrap = this.parent.element.querySelector('.' + cls.RESOURCE_COLUMN_WRAP_CLASS);\n      var conWrap = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n      var eventWrap = this.parent.element.querySelector('.' + cls.EVENT_TABLE_CLASS);\n      this.translateY = 0;\n      this.setTranslate(resWrap, conWrap, eventWrap);\n    } else {\n      var lastRenderIndex = this.parent.resourceBase.renderedResources[resourceCount - 1].groupIndex;\n      var lastCollIndex = this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1].groupIndex;\n      var renderedResConut = resourceCount + (lastCollIndex - lastRenderIndex);\n      renderedResConut = renderedResConut > this.parent.resourceBase.expandedResources.length ? this.parent.resourceBase.expandedResources.length : renderedResConut;\n      wrap.style.height = renderedResConut * this.itemSize + 'px';\n    }\n  };\n\n  VirtualScroll.prototype.setItemSize = function () {\n    this.itemSize = util.getElementHeightFromClass(this.parent.activeView.element, cls.WORK_CELLS_CLASS) || this.itemSize;\n  };\n\n  VirtualScroll.prototype.renderEvents = function () {\n    this.parent.notify(events.dataReady, {});\n    this.parent.notify(events.contentReady, {});\n    this.parent.hideSpinner();\n  };\n\n  VirtualScroll.prototype.virtualScrolling = function () {\n    var _this = this;\n\n    if (this.parent.quickPopup) {\n      this.parent.quickPopup.quickPopupHide();\n      this.parent.quickPopup.morePopup.hide();\n    }\n\n    var resWrap = this.parent.element.querySelector('.' + cls.RESOURCE_COLUMN_WRAP_CLASS);\n    var conWrap = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n    var eventWrap = this.parent.element.querySelector('.' + cls.EVENT_TABLE_CLASS);\n    var timeIndicator = this.parent.element.querySelector('.' + cls.CURRENT_TIMELINE_CLASS);\n    var conTable = this.parent.element.querySelector('.' + cls.CONTENT_TABLE_CLASS);\n    this.renderedLength = resWrap.querySelector('tbody').children.length;\n    var firstTDIndex = parseInt(resWrap.querySelector('tbody td').getAttribute('data-group-index'), 10);\n    var scrollHeight = this.parent.rowAutoHeight ? conTable.offsetHeight - conWrap.offsetHeight : this.bufferCount * this.itemSize;\n    addClass([conWrap], 'e-transition');\n    var resCollection = [];\n\n    if (conWrap.scrollTop - this.translateY < 0) {\n      resCollection = this.upScroll(conWrap, firstTDIndex);\n    } else if (conWrap.scrollTop - this.translateY > scrollHeight) {\n      resCollection = this.downScroll(conWrap, firstTDIndex);\n    }\n\n    if (!isNullOrUndefined(resCollection) && resCollection.length > 0) {\n      this.parent.showSpinner();\n      var selectedEle = this.parent.getSelectedElements();\n      this.focusedEle = selectedEle[selectedEle.length - 1] || this.focusedEle;\n      this.updateContent(resWrap, conWrap, eventWrap, resCollection);\n      this.setTranslate(resWrap, conWrap, eventWrap, timeIndicator);\n\n      if (this.parent.dragAndDropModule && this.parent.dragAndDropModule.actionObj.action === 'drag') {\n        this.parent.dragAndDropModule.navigationWrapper();\n      }\n\n      window.clearTimeout(this.timeValue);\n      this.timeValue = window.setTimeout(function () {\n        _this.renderEvents();\n      }, 250);\n    }\n  };\n\n  VirtualScroll.prototype.upScroll = function (conWrap, firstTDIndex) {\n    var index = 0;\n    index = ~~(conWrap.scrollTop / this.itemSize) + Math.ceil(conWrap.clientHeight / this.itemSize) - this.renderedLength;\n\n    if (this.parent.rowAutoHeight) {\n      index = index > firstTDIndex ? firstTDIndex - this.bufferCount : index;\n    }\n\n    index = index > 0 ? index : 0;\n    var prevSetCollection = this.getBufferCollection(index, index + this.renderedLength);\n    this.parent.resourceBase.renderedResources = prevSetCollection;\n\n    if (firstTDIndex === 0) {\n      this.translateY = conWrap.scrollTop;\n    } else {\n      var height = this.parent.rowAutoHeight ? this.averageRowHeight : this.itemSize;\n      this.translateY = conWrap.scrollTop - this.bufferCount * height > 0 ? conWrap.scrollTop - this.bufferCount * height : 0;\n    }\n\n    return prevSetCollection;\n  };\n\n  VirtualScroll.prototype.downScroll = function (conWrap, firstTDIndex) {\n    var lastResource = this.parent.resourceBase.renderedResources[this.parent.resourceBase.renderedResources.length - 1].groupIndex;\n    var lastResourceIndex = this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1].groupIndex;\n\n    if (lastResource === lastResourceIndex) {\n      return null;\n    }\n\n    var nextSetResIndex = 0;\n    nextSetResIndex = ~~(conWrap.scrollTop / this.itemSize);\n\n    if (this.parent.rowAutoHeight) {\n      nextSetResIndex = ~~((conWrap.scrollTop - this.translateY) / this.averageRowHeight) + firstTDIndex;\n      nextSetResIndex = nextSetResIndex > firstTDIndex + this.bufferCount ? nextSetResIndex : firstTDIndex + this.bufferCount;\n    }\n\n    var lastIndex = nextSetResIndex + this.renderedLength;\n    lastIndex = lastIndex > this.parent.resourceBase.expandedResources.length ? nextSetResIndex + (this.parent.resourceBase.expandedResources.length - nextSetResIndex) : lastIndex;\n    var nextSetCollection = this.getBufferCollection(lastIndex - this.renderedLength, lastIndex);\n    this.translateY = conWrap.scrollTop;\n    return nextSetCollection;\n  };\n\n  VirtualScroll.prototype.updateContent = function (resWrap, conWrap, eventWrap, resCollection) {\n    var renderedLenth = resWrap.querySelector('tbody').children.length;\n\n    for (var i = 0; i < renderedLenth; i++) {\n      remove(resWrap.querySelector('tbody tr'));\n      remove(conWrap.querySelector('tbody tr'));\n      remove(eventWrap.querySelector('div'));\n    }\n\n    this.parent.resourceBase.renderedResources = resCollection;\n    var resourceRows = this.parent.resourceBase.getContentRows(resCollection);\n    var contentRows = this.parent.activeView.getContentRows();\n    var eventRows = this.parent.activeView.getEventRows(resCollection.length);\n    append(resourceRows, resWrap.querySelector('tbody'));\n    append(contentRows, conWrap.querySelector('tbody'));\n    append(eventRows, eventWrap);\n  };\n\n  VirtualScroll.prototype.getBufferCollection = function (startIndex, endIndex) {\n    return this.parent.resourceBase.expandedResources.slice(startIndex, endIndex);\n  };\n\n  VirtualScroll.prototype.setTranslate = function (resWrap, conWrap, eventWrap, timeIndicator) {\n    setStyleAttribute(resWrap.querySelector('table'), {\n      transform: \"translateY(\" + this.translateY + \"px)\"\n    });\n    setStyleAttribute(conWrap.querySelector('table'), {\n      transform: \"translateY(\" + this.translateY + \"px)\"\n    });\n    setStyleAttribute(eventWrap, {\n      transform: \"translateY(\" + this.translateY + \"px)\"\n    });\n\n    if (!isNullOrUndefined(timeIndicator)) {\n      setStyleAttribute(timeIndicator, {\n        transform: \"translateY(\" + this.translateY + \"px)\"\n      });\n    }\n  };\n\n  VirtualScroll.prototype.updateFocusedWorkCell = function () {\n    if (this.focusedEle) {\n      var date = parseInt(this.focusedEle.getAttribute('data-date'), 10);\n      var groupIndex = parseInt(this.focusedEle.getAttribute('data-group-index'), 10);\n      var ele = this.parent.element.querySelector(\".\" + cls.WORK_CELLS_CLASS + \"[data-date=\\\"\" + date + \"\\\"][data-group-index=\\\"\" + groupIndex + \"\\\"]\");\n\n      if (ele) {\n        this.parent.addSelectedClass([ele], ele, true);\n      }\n\n      this.focusedEle = null;\n    }\n  };\n\n  VirtualScroll.prototype.destroy = function () {\n    this.removeEventListener();\n  };\n\n  return VirtualScroll;\n}();\n\nexport { VirtualScroll };","map":{"version":3,"sources":["/Users/ozigun1988/Desktop/Sosyete/sosyete-frontend/node_modules/@syncfusion/ej2-schedule/src/schedule/actions/virtual-scroll.js"],"names":["append","addClass","remove","isNullOrUndefined","setStyleAttribute","createElement","events","cls","util","VirtualScroll","parent","translateY","itemSize","bufferCount","renderedLength","averageRowHeight","isScrollHeightNull","addEventListener","prototype","isDestroyed","on","virtualScroll","virtualScrolling","removeEventListener","off","getRenderedCount","setItemSize","Math","ceil","element","clientHeight","setTranslateValue","resWrap","querySelector","RESOURCE_COLUMN_WRAP_CLASS","conWrap","CONTENT_WRAP_CLASS","eventWrap","EVENT_TABLE_CLASS","timeIndicator","CURRENT_TIMELINE_CLASS","renderVirtualTrackHeight","setTranslate","contentWrap","resourceWrap","resourceBase","setExpandedResources","wrap","className","VIRTUAL_TRACK_CLASS","slice","call","querySelectorAll","startIndex_1","parseInt","getAttribute","endIndex_1","length","renderedResources","expandedResources","filter","resource","groupIndex","style","height","virtual","appendChild","renderVirtualTrack","updateVirtualScrollHeight","lastResourceIndex","lastRenderIndex","conTable","CONTENT_TABLE_CLASS","children","offsetHeight","updateVirtualTrackHeight","resourceCount","lastCollIndex","renderedResConut","getElementHeightFromClass","activeView","WORK_CELLS_CLASS","renderEvents","notify","dataReady","contentReady","hideSpinner","_this","quickPopup","quickPopupHide","morePopup","hide","firstTDIndex","scrollHeight","rowAutoHeight","resCollection","scrollTop","upScroll","downScroll","showSpinner","selectedEle","getSelectedElements","focusedEle","updateContent","dragAndDropModule","actionObj","action","navigationWrapper","window","clearTimeout","timeValue","setTimeout","index","prevSetCollection","getBufferCollection","lastResource","nextSetResIndex","lastIndex","nextSetCollection","renderedLenth","i","resourceRows","getContentRows","contentRows","eventRows","getEventRows","startIndex","endIndex","transform","updateFocusedWorkCell","date","ele","addSelectedClass","destroy"],"mappings":"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","sourcesContent":["import { append, addClass, remove, isNullOrUndefined, setStyleAttribute, createElement } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport * as cls from '../base/css-constant';\nimport * as util from '../base/util';\n/**\n * Virtual Scroll\n */\nvar VirtualScroll = /** @class */ (function () {\n    function VirtualScroll(parent) {\n        this.translateY = 0;\n        this.itemSize = 60;\n        this.bufferCount = 3;\n        this.renderedLength = 0;\n        this.averageRowHeight = 0;\n        this.isScrollHeightNull = true;\n        this.parent = parent;\n        this.addEventListener();\n    }\n    VirtualScroll.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.virtualScroll, this.virtualScrolling, this);\n    };\n    VirtualScroll.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.virtualScroll, this.virtualScrolling);\n    };\n    VirtualScroll.prototype.getRenderedCount = function () {\n        this.setItemSize();\n        return Math.ceil(this.parent.element.clientHeight / this.itemSize) + this.bufferCount;\n    };\n    VirtualScroll.prototype.setTranslateValue = function () {\n        var resWrap = this.parent.element.querySelector('.' + cls.RESOURCE_COLUMN_WRAP_CLASS);\n        var conWrap = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        var eventWrap = this.parent.element.querySelector('.' + cls.EVENT_TABLE_CLASS);\n        var timeIndicator = this.parent.element.querySelector('.' + cls.CURRENT_TIMELINE_CLASS);\n        this.renderVirtualTrackHeight(conWrap, resWrap);\n        this.setTranslate(resWrap, conWrap, eventWrap, timeIndicator);\n    };\n    VirtualScroll.prototype.renderVirtualTrackHeight = function (contentWrap, resourceWrap) {\n        this.parent.resourceBase.setExpandedResources();\n        if (this.isScrollHeightNull) {\n            var wrap = createElement('div', { className: cls.VIRTUAL_TRACK_CLASS });\n            var resWrap = [].slice.call((resourceWrap).querySelectorAll('table td'));\n            var startIndex_1 = parseInt(resWrap[0].getAttribute('data-group-index'), 10);\n            var endIndex_1 = parseInt(resWrap[resWrap.length - 1].getAttribute('data-group-index'), 10);\n            this.parent.resourceBase.renderedResources = this.parent.resourceBase.expandedResources.filter(function (resource) {\n                return (resource.groupIndex >= startIndex_1 && resource.groupIndex <= endIndex_1);\n            });\n            this.setItemSize();\n            wrap.style.height = (this.parent.resourceBase.expandedResources.length * this.itemSize) + 'px';\n            this.isScrollHeightNull = false;\n            var virtual = this.parent.element.querySelector('.' + cls.VIRTUAL_TRACK_CLASS);\n            if (!isNullOrUndefined(virtual)) {\n                remove(virtual);\n            }\n            contentWrap.appendChild(wrap);\n        }\n    };\n    VirtualScroll.prototype.renderVirtualTrack = function (contentWrap) {\n        var wrap = createElement('div', { className: cls.VIRTUAL_TRACK_CLASS });\n        wrap.style.height = (this.parent.resourceBase.expandedResources.length * this.itemSize) + 'px';\n        contentWrap.appendChild(wrap);\n    };\n    VirtualScroll.prototype.updateVirtualScrollHeight = function () {\n        var virtual = this.parent.element.querySelector('.' + cls.VIRTUAL_TRACK_CLASS);\n        var lastResourceIndex = this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1].groupIndex;\n        var lastRenderIndex = this.parent.resourceBase.renderedResources[this.parent.resourceBase.renderedResources.length - 1].groupIndex;\n        if (lastRenderIndex !== lastResourceIndex) {\n            var conTable = this.parent.element.querySelector('.' + cls.CONTENT_TABLE_CLASS);\n            this.renderedLength = conTable.querySelector('tbody').children.length;\n            virtual.style.height = (conTable.offsetHeight + (this.parent.resourceBase.expandedResources.length - (this.renderedLength)) *\n                conTable.offsetHeight / this.renderedLength) + 'px';\n        }\n        else {\n            virtual.style.height = '';\n        }\n        this.averageRowHeight = virtual.offsetHeight / this.parent.resourceBase.expandedResources.length;\n    };\n    VirtualScroll.prototype.updateVirtualTrackHeight = function (wrap) {\n        var resourceCount = this.parent.resourceBase.renderedResources.length;\n        if (resourceCount !== this.getRenderedCount()) {\n            wrap.style.height = this.parent.element.querySelector('.e-content-wrap').clientHeight + 'px';\n            var resWrap = this.parent.element.querySelector('.' + cls.RESOURCE_COLUMN_WRAP_CLASS);\n            var conWrap = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n            var eventWrap = this.parent.element.querySelector('.' + cls.EVENT_TABLE_CLASS);\n            this.translateY = 0;\n            this.setTranslate(resWrap, conWrap, eventWrap);\n        }\n        else {\n            var lastRenderIndex = this.parent.resourceBase.renderedResources[resourceCount - 1].groupIndex;\n            var lastCollIndex = this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1].groupIndex;\n            var renderedResConut = resourceCount + (lastCollIndex - lastRenderIndex);\n            renderedResConut = (renderedResConut > this.parent.resourceBase.expandedResources.length) ?\n                this.parent.resourceBase.expandedResources.length : renderedResConut;\n            wrap.style.height = (renderedResConut * this.itemSize) + 'px';\n        }\n    };\n    VirtualScroll.prototype.setItemSize = function () {\n        this.itemSize = util.getElementHeightFromClass(this.parent.activeView.element, cls.WORK_CELLS_CLASS) || this.itemSize;\n    };\n    VirtualScroll.prototype.renderEvents = function () {\n        this.parent.notify(events.dataReady, {});\n        this.parent.notify(events.contentReady, {});\n        this.parent.hideSpinner();\n    };\n    VirtualScroll.prototype.virtualScrolling = function () {\n        var _this = this;\n        if (this.parent.quickPopup) {\n            this.parent.quickPopup.quickPopupHide();\n            this.parent.quickPopup.morePopup.hide();\n        }\n        var resWrap = this.parent.element.querySelector('.' + cls.RESOURCE_COLUMN_WRAP_CLASS);\n        var conWrap = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        var eventWrap = this.parent.element.querySelector('.' + cls.EVENT_TABLE_CLASS);\n        var timeIndicator = this.parent.element.querySelector('.' + cls.CURRENT_TIMELINE_CLASS);\n        var conTable = this.parent.element.querySelector('.' + cls.CONTENT_TABLE_CLASS);\n        this.renderedLength = resWrap.querySelector('tbody').children.length;\n        var firstTDIndex = parseInt(resWrap.querySelector('tbody td').getAttribute('data-group-index'), 10);\n        var scrollHeight = this.parent.rowAutoHeight ?\n            (conTable.offsetHeight - conWrap.offsetHeight) : this.bufferCount * this.itemSize;\n        addClass([conWrap], 'e-transition');\n        var resCollection = [];\n        if ((conWrap.scrollTop) - this.translateY < 0) {\n            resCollection = this.upScroll(conWrap, firstTDIndex);\n        }\n        else if (conWrap.scrollTop - this.translateY > scrollHeight) {\n            resCollection = this.downScroll(conWrap, firstTDIndex);\n        }\n        if (!isNullOrUndefined(resCollection) && resCollection.length > 0) {\n            this.parent.showSpinner();\n            var selectedEle = this.parent.getSelectedElements();\n            this.focusedEle = selectedEle[selectedEle.length - 1] || this.focusedEle;\n            this.updateContent(resWrap, conWrap, eventWrap, resCollection);\n            this.setTranslate(resWrap, conWrap, eventWrap, timeIndicator);\n            if (this.parent.dragAndDropModule && this.parent.dragAndDropModule.actionObj.action === 'drag') {\n                this.parent.dragAndDropModule.navigationWrapper();\n            }\n            window.clearTimeout(this.timeValue);\n            this.timeValue = window.setTimeout(function () { _this.renderEvents(); }, 250);\n        }\n    };\n    VirtualScroll.prototype.upScroll = function (conWrap, firstTDIndex) {\n        var index = 0;\n        index = (~~(conWrap.scrollTop / this.itemSize) + Math.ceil(conWrap.clientHeight / this.itemSize)) - this.renderedLength;\n        if (this.parent.rowAutoHeight) {\n            index = (index > firstTDIndex) ? firstTDIndex - this.bufferCount : index;\n        }\n        index = (index > 0) ? index : 0;\n        var prevSetCollection = this.getBufferCollection(index, index + this.renderedLength);\n        this.parent.resourceBase.renderedResources = prevSetCollection;\n        if (firstTDIndex === 0) {\n            this.translateY = conWrap.scrollTop;\n        }\n        else {\n            var height = (this.parent.rowAutoHeight) ? this.averageRowHeight : this.itemSize;\n            this.translateY = (conWrap.scrollTop - (this.bufferCount * height) > 0) ?\n                conWrap.scrollTop - (this.bufferCount * height) : 0;\n        }\n        return prevSetCollection;\n    };\n    VirtualScroll.prototype.downScroll = function (conWrap, firstTDIndex) {\n        var lastResource = this.parent.resourceBase.\n            renderedResources[this.parent.resourceBase.renderedResources.length - 1].groupIndex;\n        var lastResourceIndex = this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1].groupIndex;\n        if (lastResource === lastResourceIndex) {\n            return null;\n        }\n        var nextSetResIndex = 0;\n        nextSetResIndex = ~~(conWrap.scrollTop / this.itemSize);\n        if (this.parent.rowAutoHeight) {\n            nextSetResIndex = ~~((conWrap.scrollTop - this.translateY) / this.averageRowHeight) + firstTDIndex;\n            nextSetResIndex = (nextSetResIndex > firstTDIndex + this.bufferCount) ? nextSetResIndex : firstTDIndex + this.bufferCount;\n        }\n        var lastIndex = nextSetResIndex + this.renderedLength;\n        lastIndex = (lastIndex > this.parent.resourceBase.expandedResources.length) ?\n            nextSetResIndex + (this.parent.resourceBase.expandedResources.length - nextSetResIndex) : lastIndex;\n        var nextSetCollection = this.getBufferCollection(lastIndex - this.renderedLength, lastIndex);\n        this.translateY = conWrap.scrollTop;\n        return nextSetCollection;\n    };\n    VirtualScroll.prototype.updateContent = function (resWrap, conWrap, eventWrap, resCollection) {\n        var renderedLenth = resWrap.querySelector('tbody').children.length;\n        for (var i = 0; i < renderedLenth; i++) {\n            remove(resWrap.querySelector('tbody tr'));\n            remove(conWrap.querySelector('tbody tr'));\n            remove(eventWrap.querySelector('div'));\n        }\n        this.parent.resourceBase.renderedResources = resCollection;\n        var resourceRows = this.parent.resourceBase.getContentRows(resCollection);\n        var contentRows = this.parent.activeView.getContentRows();\n        var eventRows = this.parent.activeView.getEventRows(resCollection.length);\n        append(resourceRows, resWrap.querySelector('tbody'));\n        append(contentRows, conWrap.querySelector('tbody'));\n        append(eventRows, eventWrap);\n    };\n    VirtualScroll.prototype.getBufferCollection = function (startIndex, endIndex) {\n        return this.parent.resourceBase.expandedResources.slice(startIndex, endIndex);\n    };\n    VirtualScroll.prototype.setTranslate = function (resWrap, conWrap, eventWrap, timeIndicator) {\n        setStyleAttribute(resWrap.querySelector('table'), { transform: \"translateY(\" + this.translateY + \"px)\" });\n        setStyleAttribute(conWrap.querySelector('table'), { transform: \"translateY(\" + this.translateY + \"px)\" });\n        setStyleAttribute(eventWrap, { transform: \"translateY(\" + this.translateY + \"px)\" });\n        if (!isNullOrUndefined(timeIndicator)) {\n            setStyleAttribute(timeIndicator, { transform: \"translateY(\" + this.translateY + \"px)\" });\n        }\n    };\n    VirtualScroll.prototype.updateFocusedWorkCell = function () {\n        if (this.focusedEle) {\n            var date = parseInt(this.focusedEle.getAttribute('data-date'), 10);\n            var groupIndex = parseInt(this.focusedEle.getAttribute('data-group-index'), 10);\n            var ele = this.parent.element.querySelector(\".\" + cls.WORK_CELLS_CLASS + \"[data-date=\\\"\" + date + \"\\\"][data-group-index=\\\"\" + groupIndex + \"\\\"]\");\n            if (ele) {\n                this.parent.addSelectedClass([ele], ele, true);\n            }\n            this.focusedEle = null;\n        }\n    };\n    VirtualScroll.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    return VirtualScroll;\n}());\nexport { VirtualScroll };\n"]},"metadata":{},"sourceType":"module"}